fast managed hosts setup:
ansible all -i inventory -u root -k -m user -a "name=ansible password={{ 'password' | password_hash('sha512')}}"
ansible all -i inventory -u root -k -m authorized_key -a "user=ansible key='{{ lookup('file', '/home/ansible/.ssh/ansible.pub') }}'"
ansible all -i inventory -u root -k -m shell -a "echo 'ansible ALL=(ALL) NOPASSWD: ALL' > /etc/sudoers.d/ansible"
ansible all -i inventory -u root -k -m shell -a "sed -i -e 's/\#PubkeyAuthentication\ yes/PubkeyAuthentication\ yes/' /etc/ssh/sshd_config"

control setup:
yum install https://releases.ansible.com/ansible/rpm/release/epel-7-x86_64/ansible-2.7.0-1.el7.ans.noarch.rpm -y
alternatives --install /usr/bin/python python /usr/bin/python2.7 1
autocmd FileType yaml setlocal ai ts=2 sw=2 et